<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<script type="importmap">
{
    "imports": {
        "main": "./main.js",
        "chapters_data": "./chapters.js",
        "theme_manager": "./theme.js",
        "language_manager": "./language_manager.js",
        "chapter_manager": "./chapter_manager.js",
        "ui_manager": "./ui_manager.js",
        "edit_manager": "./edit_manager.js",
        "rich_text_editor": "./rich_text_editor.js"
    }
}
</script>
</head>
<body>
    <div id="loading-overlay">
        <div class="spinner"></div>
        <p>Translating...</p>
    </div>

    <div id="settings-button" class="settings-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings">
  <circle cx="12" cy="12" r="3"></circle>
  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51v.1a2 2 0 0 1-4 0v-.1a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l-.06.06a1.65 1.65 0 0 0 1.82.33h.1a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.1a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.1a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
</svg>
    </div>
    <div id="edit-button" class="settings-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
    </div>
    <div id="global-highlight-button" class="settings-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
    </div>
    <div id="theme-switcher" class="theme-switcher">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </div>

    <div id="settings-modal" class="settings-modal">
        <div class="modal-content">
            <span class="close-button" id="close-settings">&times;</span>
            <h2>Settings</h2>
            <div class="setting-item">
                <label for="theme-preset">Theme Preset:</label>
                <select id="theme-preset">
                    <!-- Options populated by JS -->
                </select>
            </div>
            <div class="setting-item">
                <label for="language-select">Language:</label>
                <select id="language-select">
                    <!-- Options populated by JS -->
                </select>
            </div>
            <div class="ai-warning">
                <p>Translations are AI-generated and may contain inaccuracies. The original text is in English.</p>
            </div>
        </div>
    </div>

    <div id="edit-toolbar">
        <button id="save-changes-button" class="edit-toolbar-button">Save Changes</button>
        <button id="cancel-changes-button" class="edit-toolbar-button">Cancel</button>
    </div>

    <div class="container">
        <h1>Adrift in the Oceans of Creation</h1>
        <h2 class="subtitle">Lavender</h2>
        
        <div class="summary">
            <h2>Story Summary</h2>
            <p id="story-summary-text">Generating summary...</p>
        </div>

        <div class="decoration">✧ ✦ ✧</div>

        <!-- Chapter list will be dynamically generated by JavaScript -->
        <ul class="chapters" id="chapters-list"></ul>

        <div class="decoration">✧ ✦ ✧</div>
    </div>

    <script type="module" src="main.js"></script>
</body></html>